# 希尔排序 `Shell Sort`

## 思维导图

![](https://p.ipic.vip/y03c3s.jpg)

## 特性

- 缩减增量排序
- 通过比较相距一定间隔的元素，各趟比较所用的距离随着算法的进行而较小，直到只比较相邻元素为止
- 使数组中任意间隔为 $h$ 的元素都是有序的， 也称为 $h$ 有序数组，换句话说一个 $h$ 有序数组就是 $h$ 个相互独立的有序数组编织在一起组成的一个数组
- 也是一种插入排序
- 为了解决大规模乱序数组排序很慢的问题
- 希尔排序为了加快速度简单的改进了插入排序，交换不相邻的元素以对数组的局部进行排序，并最终用插入排序将局部有序的数组排序
- 时间复杂度 $O(n^\frac{2}{3})$


## 算法流程

!!! tip "算法流程"

    实现希尔排序的一种方法是对于每个 $h$ ，用插入排序将 $h$ 个子数组独立地排序。但因为子数组是相互独立的，一个更简单的方法是在 $h$ 子数组中将每个元素交换到比它大的元素之前去（将比它的元素向右移动一格）。只需要在插入排序的代码中将移动元素的距离由 $1$ 改为 $h$ 即可。

    ![](https://p.ipic.vip/026jz9.png)

    ```java
    public class Shell {
        public static void sort(int[] a){
            //将a[]按升序排列
            int N = a.length;
            int h = 1;
            while(h < N/3) h = 3*h + 1;//1,4,13,40,121,364,1093,...
            while(h >=1){
                //将数组变为h有序
                for(int i = h; i < N; i++){
                    //将a[i]插入到a[i-h], a[i-2*h], a[i-3*h]...之中
                    for(int j = i; j>=h && less(a[j], a[j-h]; j -= h){
                        exch(a, j, j-h);
                    }
                    h = h/3;

                }
            }
        }
    }

    ```