## 问题

- 为什么用微服务
- 怎么设计一个高并发的系统
- 秒杀系统怎么设计
- 怎么保证数据的一致性？
- 为什么要异步任务呢
- 反向代理nginx有什么用？
- 怎么做系统性能测试？
- JVM调优了解吗？
- 为什么要拆分服务？
- 微服务会带来什么问题？有什么解决方案？
- 为什么要有注册中心
- 服务间怎么通信呢？
- 服务熔断、限流、降级了解吗？
- 配置中心有什么用？
- 用过网关吗？有什么用？
- 怎么链路追踪呢？
- 分布式锁？
- 分布式ID
- 分布式事务？


## 答案

### 为什么用微服务

!!! tip "为什么用微服务"

    - 解耦合，业务耦合拆分开来
    - 独立部署，扩展和删除
    - 弹性，出故障不会影响其它服务
    - 可以不同语言来实现服务

### 怎么设计一个高并发的系统

!!! tip "怎么设计一个高并发的系统"

    - 多点部署服务
    - 微服务拆分不同模块
    - 分库分表
    - 线程池
    - 主从分离、或者说是读写分离
    - 使用缓存
    - CDN静态资源访问
    - 消息队列削峰
    - 降级熔断
    - 限流
    - 做好压测

### 秒杀系统怎么设计

!!! tip "秒杀系统怎么设计"

    同上

### 怎么保证数据的一致性？

!!! tip "怎么保证数据的一致性？"

    - 做好幂等，前端限制按钮置灰，后端用分布式id
    - 分布式锁


### 为什么要异步任务呢

!!! tip "为什么要异步任务呢"

    慢业务需要

### 反向代理nginx有什么用？

!!! tip "反向代理nginx有什么用？"

    - 提高访问速度，缓存
    - 防火墙
    - 负载均衡


### 怎么做系统性能测试？

!!! tip "怎么做系统性能测试？"

    apache bench


### JVM调优了解吗？

!!! tip "JVM调优了解吗？"



### 为什么要拆分服务？

!!! tip "为什么要拆分服务？"

    - 业务复杂后，频繁的迭代影响整体的稳定性
    - 测试效率低下
    - 代码冲突频繁
    - 架构升级也困难


### 微服务会带来什么问题？有什么解决方案？

!!! tip "微服务会带来什么问题？有什么解决方案？"

    - 数据一致性问题：幂等、分布式锁
    - 分布式事务问题：分布式锁
    - 复杂度增加，服务监控、服务间依赖关系、异常问题排查：运维系统，链路追踪，日志统计


### 为什么要有注册中心
!!! tip "为什么要有注册中心"

    - 服务的状态管理：在线，不在线，有心跳机制
    - 服务间通信：每个服务的ip可能会变化，注册中心相当于通讯里


### 服务间怎么通信呢？

!!! tip "服务间怎么通信呢？"

    - RestTemplate
    - Feign：通过启动类enable扫描@FeignClient注解修饰的接口，然后通过反射实例化这个接口调用远程服务接口


### 服务熔断、限流、降级了解吗？

!!! tip "服务熔断、限流、降级了解吗？"

    熔断：某个下游服务故障引起
    降级：整体的核心业务线可用，其它非核心的停用
    限流：限制并发