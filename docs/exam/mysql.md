# MySQL

## 问题

- 什么是关系型数据库？
- MySQL 有什么优点？
- MySQL 基础架构
- MySQL 支持哪些存储引擎？默认使用哪个？
- MySQL 存储引擎架构了解吗？
- MyISAM 和 InnoDB 有什么区别？
- 索引介绍
- 索引的优缺点
- 索引底层数据结构选型
- 为什么不用hash表作为索引
- 为什么不用二叉查找树作为索引
- 为什么不用AVL树作为索引
- 为什么不用红黑树作为索引
- 什么是B树&B+树
- B 树& B+树两者有何异同呢？
- 聚簇索引介绍?聚簇索引的优缺点?
- 非聚簇索引介绍?非聚簇索引的优缺点?
- 非聚簇索引一定回表查询吗(覆盖索引)?
- 覆盖索引
- 联合索引
- 最左前缀匹配原则
- 正确使用索引的一些建议
- MySQL三大日志(binlog、redo log和undo log)详解
- 事务隔离级别
- SQL语句在MySQL中的执行过程
- 什么是执行计划？
- 如何获取执行计划？
- 如何分析 EXPLAIN 结果？
- MySQL自增主键一定是连续的吗
- MySQL时间类型数据存储建议
- MySQL隐式转换造成索引失效

## 答案

### 什么是关系型数据库？

!!! tip "什么是关系型数据库？"

    关系模型来组织数据，以行和列的形式存储数据

### MySQL 有什么优点？

!!! tip "MySQL 有什么优点？"

    1. 成熟稳定
    2. 开源免费
    3. 文档丰富
    4. 社区活跃
    5. 事务支持优秀
    6. 支持分库分表、读写分离、高可用


### MySQL 基础架构

!!! tip "MySQL 基础架构"

    - 连接器:身份认证和权限相关
    - 查询缓存:查之前，先查缓存，mysql8移除了
    - 分析器:先看sql要干嘛，再检查语法
    - 优化器:按mysql认为的最优方案执行优化
    - 执行器:执行语句，然后从存储引擎返回数据。
    - 存储引擎: 存储和读取数据，插件式架构，支持innoDB、MyISAM等


### MySQL 支持哪些存储引擎？默认使用哪个？

!!! tip "MySQL 支持哪些存储引擎？默认使用哪个？"

    InnoDB, MyISAM

    MySQL 5.5.5之前默认是MyISAM
    MySQL 5.5.5之后默认是InnoDB


### MySQL 存储引擎架构了解吗？

!!! tip "MySQL 存储引擎架构了解吗？"

    插件式架构，支持多种存储引擎。存储引擎是基于表的，而不是数据库，可以为不同的表设置不同的存储引擎

### MyISAM 和 InnoDB 有什么区别？

!!! tip "MyISAM 和 InnoDB 有什么区别？"

    - MyISAM 不支持事务和行级锁，只支持表级锁，而且最大的缺陷就是崩溃后无法安全恢复。
    - MyISAM 不支持事务
    - MyISAM 不支持外键
    - InnoDB支持 MVCC
    - 索引实现不一样，InnoDB数据就是索引，MyISAM索引和数据分离
    - InnoDB性能更好，随着cpu核心增多，性能线性增长


### 索引介绍

!!! tip "索引介绍"

    用于检索数据的数据结构，类似于书的目录

### 索引的优缺点

!!! tip "索引的优缺点"

    - [x] 优点

    - 加速检索速度
    - 唯一索引保证唯一性

    - [x] 缺点

    - 创建索引有耗时
    - 存储索引耗费空间

### 索引底层数据结构选型

!!! tip "索引底层数据结构选型"

    - 哈希表 有哈希冲突
    - 二叉查找树(BST)，不平衡的时候退化为线性
    - AVL树，频繁旋转降低性能
    - 红黑树
    - B树&B+树